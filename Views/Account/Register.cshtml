@* Views/Account/Register.cshtml *@
@model Project3.Models.RegisterModel
@{
    ViewData["Title"] = "Register";
    Layout = "_AppLayout"; // Or your specific Account Layout
}

<h2>Register New Account</h2>
<hr />

<div class="row">
    @* Use a narrower column for the form if desired *@
    <div class="col-md-8 col-lg-6">

        <form asp-action="Register" method="post">
            @Html.AntiForgeryToken()

            @* Display general errors or validation summary *@
            <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>
            @if (ViewData["ErrorMessage"] != null)
            {
                <div class="alert alert-danger">@ViewData["ErrorMessage"]</div>
            }

            <h4>Account Details</h4>
            <div class="form-floating mb-3">
                <input asp-for="Username" class="form-control" autocomplete="username" placeholder="Username" />
                <label asp-for="Username"></label>
                <span asp-validation-for="Username" class="text-danger"></span>
            </div>
            <div class="form-floating mb-3">
                <input asp-for="Email" class="form-control" autocomplete="email" placeholder="name@example.com" />
                <label asp-for="Email"></label>
                <span asp-validation-for="Email" class="text-danger"></span>
            </div>
            <div class="form-floating mb-3">
                <input asp-for="Password" class="form-control" autocomplete="new-password" placeholder="Password" />
                <label asp-for="Password"></label>
                <span asp-validation-for="Password" class="text-danger"></span>
            </div>
            <div class="form-floating mb-3">
                <input asp-for="ConfirmPassword" class="form-control" autocomplete="new-password" placeholder="Confirm Password" />
                <label asp-for="ConfirmPassword"></label>
                <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
            </div>

            <hr />
            <h4>Personal Details</h4>
            <div class="form-floating mb-3">
                <input asp-for="FirstName" class="form-control" placeholder="First Name" />
                <label asp-for="FirstName"></label>
                <span asp-validation-for="FirstName" class="text-danger"></span>
            </div>
            <div class="form-floating mb-3">
                <input asp-for="LastName" class="form-control" placeholder="Last Name" />
                <label asp-for="LastName"></label>
                <span asp-validation-for="LastName" class="text-danger"></span>
            </div>


            <hr />
            <h4>Account Type</h4>
            <div class="mb-3">
                <label asp-for="UserRole" class="form-label"></label>
                @* FIX: Use asp-for="UserRole" to match RegisterModel *@
                <select asp-for="UserRole" class="form-select">
                    <option value="">-- Select Account Type --</option>
                    <option value="reviewer">Reviewer</option>
                    <option value="restaurantRep">Restaurant Representative</option> @* Match value in TP_Users/SP *@
                </select>
                <span asp-validation-for="UserRole" class="text-danger"></span>
            </div>


            <hr />
            <h4>Security Questions</h4>
            <p><small>These will be used to recover your account if you forget your password or username.</small></p>
            <div class="mb-3">
                <label asp-for="SecurityQuestion1" class="form-label"></label>
                <input asp-for="SecurityQuestion1" class="form-control" placeholder="e.g., What was your first pet's name?" />
                <span asp-validation-for="SecurityQuestion1" class="text-danger"></span>
            </div>
            <div class="form-floating mb-3">
                <input asp-for="SecurityAnswer1" class="form-control" placeholder="Answer 1" />
                <label asp-for="SecurityAnswer1"></label>
                <span asp-validation-for="SecurityAnswer1" class="text-danger"></span>
            </div>
            <div class="mb-3">
                <label asp-for="SecurityQuestion2" class="form-label"></label>
                <input asp-for="SecurityQuestion2" class="form-control" placeholder="e.g., What city were you born in?" />
                <span asp-validation-for="SecurityQuestion2" class="text-danger"></span>
            </div>
            <div class="form-floating mb-3">
                <input asp-for="SecurityAnswer2" class="form-control" placeholder="Answer 2" />
                <label asp-for="SecurityAnswer2"></label>
                <span asp-validation-for="SecurityAnswer2" class="text-danger"></span>
            </div>
            <div class="mb-3">
                <label asp-for="SecurityQuestion3" class="form-label"></label>
                <input asp-for="SecurityQuestion3" class="form-control" placeholder="e.g., What is your mother's maiden name?" />
                <span asp-validation-for="SecurityQuestion3" class="text-danger"></span>
            </div>
            <div class="form-floating mb-3">
                <input asp-for="SecurityAnswer3" class="form-control" placeholder="Answer 3" />
                <label asp-for="SecurityAnswer3"></label>
                <span asp-validation-for="SecurityAnswer3" class="text-danger"></span>
            </div>

            @* FIX: Removed elements related to RememberLoginId - they don't belong here *@

            <button type="submit" class="w-100 btn btn-lg btn-primary mt-3">Register</button>

            <p class="mt-3 text-center">
                Already have an account? <a asp-action="Login">Log in</a>
            </p>
        </form>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
